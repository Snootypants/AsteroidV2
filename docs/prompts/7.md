insane efficiency. keep the loop rolling.

here’s Block 10 ready so you can paste it the moment Block 9 lands:

EXECUTION MODE — Implement Upgrades system + 3-choice picker UI. Output ONE unified diff under `/diffs/`. Then commit and push.

Scope
- NEW:    /AsteroidsV2/reactShell/src/game/systems/Upgrades.ts
- NEW:    /AsteroidsV2/reactShell/src/ui/UpgradeMenu.tsx
- UPDATE: /AsteroidsV2/reactShell/src/game/GameState.ts  (mods shape, upgradeHistory, apply logic)
- UPDATE: /AsteroidsV2/reactShell/src/game/GameCanvas.tsx (phase transitions)
- UPDATE: /AsteroidsV2/reactShell/src/styles.css (upgrade menu styles)

Requirements

1) Mods + Upgrades (game logic)
- Define Mods in GameState: 

{ fireRateMul:number, engineMul:number, spread:number, pierce:number, ricochet:number,
shieldCharges:number, bulletBounce:number, bulletLifeMul:number, bulletSpeedMul:number,
magnetRadius:number, drone:boolean }

Defaults = identity (1 or 0).
- Implement Upgrade definitions (16 baseline as per plan) with rarity tiers and numeric effects that match vanilla (e.g., Rapid Fire → fireRateMul *= 1.30; Engine Boost → engineMul *= 1.20; Shield Charge → shieldCharges += 1; Ricochet → bulletBounce += 1; Piercing → pierce += 1; Spread Shot → spread += 2; etc.).
- `Upgrades.ts`:
```ts
export type Upgrade = { id:string; name:string; tier:'common'|'rare'|'epic'|'legendary';
                        apply:(mods:Mods)=>void; describe:(mods:Mods)=>string; };
export function getUpgradeChoices(wave:number, taken:Set<string>): Upgrade[];
export function applyUpgrade(u:Upgrade, state:GameState): void;

	•	Weighted random by tier; exclude already-taken upgrades when appropriate.
	•	Record selection in upgradeHistory.

	2.	Picker UI (UpgradeMenu.tsx)

	•	3 cards centered overlay; keyboard shortcuts 1/2/3; click to select.
	•	Show name, tier badge, and short describe() text.
	•	On select: apply upgrade, close menu, transition back to playing.

	3.	Phase transitions (GameCanvas/App integration)

	•	On wave clear → set gamePhase='upgrade' and prepare 3 choices via getUpgradeChoices.
	•	After selection → apply upgrade, push to upgradeHistory, gamePhase='playing', spawn next wave per existing logic.
	•	Ensure invulnerability timing on wave start remains intact.

	4.	HUD integration

	•	HUD should automatically reflect mods via existing selectors (e.g., shieldCharges, possibly show last upgrade in the bottom-left list already wired).
	•	No extra HUD features required in this block.

	5.	Styling (append minimal)

.upgrade-overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:7000; background:rgba(0,0,0,.35); }
.upgrade-grid{ display:grid; grid-template-columns:repeat(3, 280px); gap:16px; }
.upgrade-card{ pointer-events:auto; background:rgba(0,0,0,.5); border:1px solid rgba(255,255,255,.18); border-radius:12px; padding:16px; cursor:pointer; transition:transform .12s; }
.upgrade-card:hover{ transform:translateY(-2px); }
.tier-common{ border-color:#9aa4b2; }
.tier-rare{ border-color:#4ea9ff; }
.tier-epic{ border-color:#b889ff; }
.tier-legendary{ border-color:#ffcc66; }
.upgrade-name{ font-weight:700; margin-bottom:6px; }
.upgrade-desc{ opacity:.9; font-size:14px; }

Constraints
	•	Do NOT change established combat constants.
	•	No new dependencies.
	•	Asset paths/casing unchanged.
	•	Keep update frequency sane; no per-frame React re-render storms.

Acceptance
	•	Clearing a wave opens the 3-choice overlay.
	•	1/2/3 keys or click selects and applies the upgrade; returns to gameplay.
	•	Effects are visible immediately (e.g., Rapid Fire increases fire rate; Shield Charge increments shield count; Spread adds side bullets; Pierce/Ricochet modify bullet behavior if those are already supported hooks; if hooks not present yet, wire no-op now but store mods so later blocks use them).
	•	upgradeHistory shows last 8 in HUD (already wired).
	•	No regressions to waves, collisions, hunters, or shields.

Deliverable
	•	ONE timestamped unified diff under /diffs/ with all new/updated files.
	•	Commit message: “Add Upgrades system and 3-choice picker UI; wire wave-clear → upgrade → resume”.

